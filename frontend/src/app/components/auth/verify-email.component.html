<div class="auth-container">
  <div class="logo-container">
    <svg class="auth-logo" viewBox="0 0 68 42" xmlns="http://www.w3.org/2000/svg">
      <text x="4" y="32" text-anchor="middle" font-family="'Poppins', sans-serif" font-size="28" font-weight="800" fill="#4ade80" transform="rotate(10, 4, 32)">1</text>
      <text x="14" y="32" text-anchor="middle" font-family="'Poppins', sans-serif" font-size="28" font-weight="800" fill="rgba(255,255,255,0.9)" transform="rotate(10, 14, 32)">X</text>
      <text x="26" y="32" text-anchor="middle" font-family="'Poppins', sans-serif" font-size="28" font-weight="800" fill="#4ade80" transform="rotate(10, 26, 32)">2</text>
      <text x="48" y="17" text-anchor="middle" font-family="'Poppins', sans-serif" font-size="9" font-weight="600" fill="rgba(255,255,255,0.45)" letter-spacing="2">BET</text>
      <circle cx="48" cy="30" r="6.5" fill="none" stroke="rgba(255,255,255,0.35)" stroke-width="1.2"/>
      <path d="M44.5 27.5 L48 30 L51.5 27.5 M44.5 32.5 L48 30 L51.5 32.5" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="0.8"/>
      <line x1="41.5" y1="30" x2="54.5" y2="30" stroke="rgba(255,255,255,0.15)" stroke-width="0.8"/>
    </svg>
  </div>
  <div class="auth-card">
    @if (!success) {
      <div class="otp-header">
        <div class="otp-icon">✉️</div>
        <h2>{{ 'auth.verifyYourEmail' | translate }}</h2>
        <p class="auth-subtitle">{{ 'auth.otpSentTo' | translate }} <strong>{{ email }}</strong></p>
      </div>

      <div class="otp-inputs" (paste)="onPaste($event)">
        @for (digit of digits; track $index) {
          <input
            #otpInput
            type="text"
            inputmode="numeric"
            maxlength="1"
            class="otp-box"
            [class.filled]="digit !== ''"
            [value]="digit"
            (input)="onDigitInput($index, $event)"
            (keydown)="onKeyDown($index, $event)"
            [disabled]="loading"
          />
        }
      </div>

      <button
        class="btn-primary"
        [disabled]="loading || isIncomplete"
        (click)="submitOTP()"
      >
        {{ loading ? ('auth.loading' | translate) : ('auth.verifyCode' | translate) }}
      </button>

      <div class="resend-section">
        <p class="resend-text">{{ 'auth.didntReceiveCode' | translate }}</p>
        @if (resendCooldown > 0) {
          <p class="resend-cooldown">{{ 'auth.resendIn' | translate }} {{ resendCooldown }}s</p>
        } @else {
          <button class="resend-btn" (click)="resendCode()" [disabled]="resendLoading">
            {{ resendLoading ? ('auth.loading' | translate) : ('auth.resendCode' | translate) }}
          </button>
        }
      </div>
    } @else {
      <div class="success-state">
        <div class="success-icon">✅</div>
        <h2>{{ 'auth.emailVerified' | translate }}</h2>
        <p class="auth-subtitle">{{ 'auth.redirectingHome' | translate }}</p>
      </div>
    }
  </div>
</div>
